#### Как работают VMware сети?
Так как виртуальные ОС и контейнеры создаются в изолированной среде от хостовой ОС, часто возникает вопрос каким образом можно подключить гостевые среды к хостовой? Как дать доступ виртуальным машинам в Интернет или существующей компьютерной сети? В VMware Workstation представлены множество типов сетевой конфигурации устройств: начиная от соединения мостом, заканчивая host-only режимом:
![|700x393](Wokrstation%20Pro-10.10.2025-17_10.png)

У каждой машины находится свой сетевой интерфейс по средствам, которого и будет происходить коммуникация. Они представляют собой отдельное устройство, которые должны быть объединены в единую канальную и/или сетевую среду вместе с хостовой ОС откуда они и будут получать трафик.

В организации такого соединения в жизни выступает сетевая инфраструктура: коммутаторы, маршрутизаторы, мосты и многое другое. В виртуальной не много различий, так как для объединения устройств во единое целое используется, так же сетевая инфраструктура, только виртуальная. Рассмотрим основные способы настройки подключения.

#### Настройка сети для VMware Workstation
##### Первый способ подключения
Представляет собой режим **Bridge** или **сетевой мост**. Схематически данный способ выглядит следующим образом:
![|522x293](Wokrstation%20Pro.-10.10.2025-17_10.png)

Принцип работы повязан на создании виртуального коммутатора, который объединит в канальную среду созданные виртуальные машины. Когда все гостевые ОС оказались в одной канальной среде, необходимо предоставить доступ к сетевому адаптеру хоста, который имеет доступ к общей или интернет сети. Это реализуется по средствам моста.

**Сетевой мост** – в контексте виртуализации, представляет собой логическое устройство, надстройку над основным интерфейсом. Который позволяет объединить виртуальный и реальный интерфейс в единую канальную среду, путем простой пересылки кадров.

В данном случае, когда необходимо предоставить доступ к хостовой сети была бы проблема. Если интерфейс используется для связи с остальными устройствами, то при создании моста интерфейс отключается от сетевого стека машины и используется в мосте. Поэтому для сетевого интерфейса добавлен, по умолчанию, драйвер который создает под интерфейс. Который и используется, а затем устройство получив пакет маршрутизирует его в соответствии с правилами на машине.

С точки зрения безопасности данный способ имеет ряд уязвимостей для хостовой ОС и сети. Поэтому рекомендуется добавлять устройства в VLAN, который разграничит канальную среду.

##### Второй способ подключения
На скриншоте, так же представлено **соединение через NAT**. Схема, которого представлена ниже:
![|449x253](Wokrstation%20Pro.-10.10.2025-18_10.png)

Особенность данного подключения, в том что гостевая ОС не считается полноправной участницей сети. Коммуникация происходит через NAT устройство, обычно это хостовая ОС. Все проходящие запросы от гостевых ОС подменяются на хостовой и участником сети считается ОС – носитель гостевой. Безопасность хостовой ОС можно обеспечить за счет разрешения перенаправления пакетов, но запрета на их принятие.

Настройка сети так же проста, необходимо выбрать пункт NAT. После чего гипервизор произведет изменения и машина станет доступна.

##### Третий способ подключения

**Host-only соединение** обеспечивает доступ к устройству за счет подключения к коммутатору, в отличии от остальных способов для гостевых ОС недоступна внешняя сеть хостовой. Так как интерфейсы работают в режим разборчивом и не принимают пакеты, которые не относятся к его адресу.

##### Объединение гостевых машин
Обратите внимание, что выше перечисленные методы работаю только для одной гостевой машины. Для объединения многих с помощью коммутатора выберите одну из Specific Networks
Открыв список сетей, можно увидеть, что каждой сети присвоено свое значение:
![|700x393](Wokrstation%20Pro.-10.10.2025-18_10-1.png)
Все представленные сети, кроме специальных с пометками VMnet1 и VMnet8, представляют собой подготовленные коммутаторы с DHCP – серверами готовыми для подключения устройств. DHCP так же настраивается и меняется сегмент, если возникает потребность в использовании без заготовленной адресации, то всегда можно создать обычный **Lan segment**. Данная опция так же представлена среди способов подключения.

Сеть VMnet1 предварительно подключает гостевые ОС и хостовую ОС к коммутатору, организуя **Host-only соединение**. Аналогично происходит и с VMnet8, где устройства предварительно коммутируются и присоединяются к канальной среде. В качестве шлюза указывается хостовое устройство.

Соответственно для корректной работы машин необходимо каждой из указать соответствующий адаптер с подготовленной или автоматически сконфигурированной сетью.

https://rutube.ru/video/3638f38c96bca30e0b9bfd8430e4ba72